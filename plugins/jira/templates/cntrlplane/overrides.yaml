# Generated by Claude Sonnet 4.5 (Anthropic) - December 2025
#
# CNTRLPLANE Project Overrides
#
# This file applies HyperShift team conventions to base templates.
# The hypershift label applies to all templates (including product templates like ocpbugs-bug).
# Component selection applies only to base templates (not product templates which have their own).

name: cntrlplane-overrides
description: CNTRLPLANE project-wide HyperShift labels and component requirements
version: 1.0.0
created: 2025-12-16
author: openshift-eng

source:
  repository: "https://github.com/openshift-eng/ai-helpers"
  path: "plugins/jira/templates/cntrlplane/overrides.yaml"

project_key: CNTRLPLANE

# Top-level applies_to: default for all fields unless overridden
# Applies only to base templates (epic, story, task, spike, bug)
# Product templates like ocpbugs-bug are excluded (they have their own component logic)
applies_to:
  - "common/bug.yaml"
  - "common/spike.yaml"
  - "common/task.yaml"
  - "common/story.yaml"
  - "common/epic.yaml"

# HyperShift label applies to ALL templates (overrides top-level applies_to)
# This includes product templates like ocpbugs-bug
defaults:
  labels:
    - ai-generated-jira
    - hypershift
  applies_to:
    - "common/*.yaml"

# HyperShift component selection for base templates
# Uses top-level applies_to (core 5 templates only)
placeholders:
  - name: hypershift_component
    description: "HyperShift platform component (required for all HyperShift issues)"
    required: true
    prompt_type: options
    prompt_text: "Which HyperShift platform does this issue affect?"
    prompt_with_options:
      - value: "HyperShift / ARO"
        description: "ARO HCP (Azure Red Hat OpenShift Hosted Control Planes)"
        keywords: ["aro", "azure", "aro hcp"]
      - value: "HyperShift / ROSA"
        description: "ROSA HCP (Red Hat OpenShift Service on AWS Hosted Control Planes)"
        keywords: ["rosa", "aws", "rosa hcp"]
      - value: "HyperShift"
        description: "Platform-agnostic or affects both ARO and ROSA"
        keywords: ["multi-cloud", "platform-agnostic", "both platforms"]
    auto_detect: true
    help_text: |
      Select the platform this issue targets:
      - ARO: For Azure-specific work
      - ROSA: For AWS-specific work
      - HyperShift: For platform-agnostic or multi-platform work

      Component is auto-detected from keywords in summary/description.

# Component field mapping for MCP
component_field: "{{hypershift_component}}"

# Require component selection for base templates
# Product templates like ocpbugs-bug already have their own component logic
jira_fields:
  components:
    required: true
    prompt_if_missing: true
