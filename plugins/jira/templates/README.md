<!-- Generated by Claude Sonnet 4.5 (Anthropic) - December 2025 -->

# Jira Issue Templates

Pre-built templates for creating consistent Jira issues across projects and teams.

## Template Inheritance and Overrides

Templates use **inheritance** to reduce duplication and **overrides** to apply project-wide conventions.

### How Inheritance Works

Template inheritance creates a chain where each level adds or modifies fields from its parent. Child templates inherit everything from their parent and can override any field.

**Example:** OCPEDGE team creating a custom bug template

The OCPEDGE team wants to customize bug reports for their project:
- Force component selection from OCPEDGE-specific components
- Prompt for pacemaker logs when component is "Two Node Fencing"
- Include team-specific troubleshooting context

They create `ocpedge/bug.yaml` that inherits from `common/ocpbugs-bug.yaml`:

```yaml
# ocpedge/bug.yaml - OCPEDGE team bug template
inherits: common/ocpbugs-bug.yaml    # Inherits OCPBUGS product conventions

placeholders:
  - name: component                  # Override: force OCPEDGE component selection
    description: "OCPEDGE component"
    required: true
    type: select
    options:
      - MicroShift
      - Two Node Fencing
      - NextGen
  - name: pacemaker_logs             # Add: team-specific placeholder
    description: "Pacemaker logs (if component is Two Node Fencing)"
    required: false
  - name: edge_context               # Add: edge-specific troubleshooting info
    description: "Edge deployment context (hardware, network topology)"
    required: true
```

**The inheritance chain:**

```text
ocpedge/bug.yaml                    # OCPEDGE customizations
    ↓ inherits from
common/ocpbugs-bug.yaml             # OCPBUGS product conventions
    ↓ inherits from
common/bug.yaml                     # Standard bug format
    ↓ inherits from
_base.yaml                          # Shared defaults (labels, priority)
```

**What each level provides:**

| Template | What it defines |
|----------|----------------|
| `_base.yaml` | Default labels (`ai-generated-jira`), priority mapping, display format |
| `common/bug.yaml` | Bug-specific fields (steps to reproduce, expected/actual results) |
| `common/ocpbugs-bug.yaml` | OCPBUGS product fields (platform, cluster type, OpenShift version) |
| `ocpedge/bug.yaml` | OCPEDGE team customizations (edge components, pacemaker logs, edge context) |

**Result:** When an OCPEDGE engineer creates a bug, they get:
- All standard bug fields (from `common/bug.yaml`)
- OCPBUGS product fields (from `common/ocpbugs-bug.yaml`)
- OCPEDGE team-specific prompts (from `ocpedge/bug.yaml`)
- Without duplicating any of the parent template content

## Template Selection

When you run `/jira:create <type> <PROJECT> "..."`, the system searches for templates in this order (first match wins):

1. **User personal template**: `~/.jira-templates/{project}-{type}.yaml`
   - Example: `~/.jira-templates/ocpedge-story.yaml`
   - Gitignored, for your personal customizations

2. **Team-specific template**: `{project}/{type}.yaml`
   - Example: `ocpedge/spike.yaml`
   - Custom templates for a specific team

3. **Product-level template**: `common/{project}-{type}.yaml`
   - Example: `common/ocpbugs-bug.yaml`
   - Templates for specific products (OCPBUGS, RHEL, OSDOCS)

4. **Base type template**: `common/{type}.yaml`
   - Example: `common/story.yaml`
   - Generic template for all projects

**Example:** `/jira:create bug OCPBUGS "API server crash"`

```
Search order:
1. ~/.jira-templates/ocpbugs-bug.yaml  ❌ Not found
2. ocpbugs/bug.yaml                    ❌ Not found
3. common/ocpbugs-bug.yaml             ✅ FOUND - use this
4. common/bug.yaml                     (not checked)
```

After selecting the template, overrides are applied (see Project Overrides section below).

## Template Reference Guide

Templates are organized by issue type. Each issue type has an educational guide with best practices.

| Issue Type | Guide | Available Templates |
|------------|-------|---------------------|
| Story | [Story Guide](../docs/issue-types/story.md) | `common-story` (all projects) |
| Epic | [Epic Guide](../docs/issue-types/epic.md) | `common-epic` (all projects) |
| Task | [Task Guide](../docs/issue-types/task.md) | `common-task` (all projects) |
| Spike | [Spike Guide](../docs/issue-types/spike.md) | `common-spike`, `ocpedge-spike` |
| Bug | [Bug Guide](../docs/issue-types/bug.md) | `common-bug`, `ocpbugs-bug`, `osdocs-bug`, `rhel-bug` |
| Feature | [Feature Guide](../docs/issue-types/feature.md) | `common-feature`, `extended-feature` |
| RFE | [RFE Guide](../docs/issue-types/rfe.md) | `rfe` |

**Usage:**
```bash
# Create with auto-selected template
/jira:create story <PROJECT> "Add authentication"

# List available templates
/jira:template list

# Create with specific template
/jira:create bug OCPBUGS "API server crash" --template ocpbugs-bug
```

## Project Overrides

**Project overrides** allow teams to apply project-wide conventions to templates matching specific patterns without creating duplicate templates for each issue type.

### How Overrides Work

When creating an issue with `/jira:create <type> <PROJECT> "..."`, the system:

1. **Selects template** based on project and issue type (see Template Selection below)
   - Example: `/jira:create story <PROJECT> "..."` → `common/story.yaml`

2. **Checks for overrides** using the project key from the command
   - Looks for `{project-lowercase}/overrides.yaml`
   - Example: `<PROJECT>` → checks for `<project>/overrides.yaml`

3. **Applies overrides** if the template matches the `applies_to` glob patterns
   - If `applies_to: ["common/*.yaml"]` and template is `common/story.yaml` → match!
   - Merges override fields on top of template

4. **Returns merged template** with project-specific customizations applied

### Example: OCPEDGE Overrides

The OCPEDGE team wants all their issues to:
- Require component selection (prevent filing bugs without a component)
- Use a simplified display format (omit project field)
- Add the `ai-generated-jira` label

They create `ocpedge/overrides.yaml`:

```yaml
# ocpedge/overrides.yaml
name: ocpedge-overrides
project_key: OCPEDGE

# Apply to all common templates (bug, story, epic, task, spike, etc.)
applies_to:
  - "common/*.yaml"

# Simplified display format
display_format:
  - priority
  - summary
  - assignee
  - status

# Require component for all issues
jira_fields:
  components:
    required: true
    prompt_if_missing: true

# Add base label
defaults:
  labels:
    - ai-generated-jira
```

**What gets overridden:**

| Template | Overrides Applied? | Reason |
|----------|-------------------|---------|
| `common/story.yaml` | ✅ Yes | Matches `common/*.yaml` pattern |
| `common/bug.yaml` | ✅ Yes | Matches `common/*.yaml` pattern |
| `common/ocpbugs-bug.yaml` | ✅ Yes | Matches `common/*.yaml` pattern |
| `ocpedge/spike.yaml` | ❌ No | Doesn't match pattern (not in common/) |
| `user/my-template.yaml` | ❌ No | Doesn't match pattern (not in common/) |

**Usage:**
```bash
# OCPEDGE engineer creating story in OCPEDGE project
/jira:create story OCPEDGE "Add authentication"
  → Uses common/story.yaml + ocpedge/overrides.yaml (auto-detected)
  → Component selection required
  → Simplified display format applied

# CNTRLPLANE engineer filing bug in OCPBUGS with team conventions
/jira:create bug OCPBUGS "API server crash" --overrides cntrlplane/overrides.yaml
  → Uses common/ocpbugs-bug.yaml + cntrlplane/overrides.yaml
  → Adds "hypershift" label (labels have field-specific applies_to: common/*.yaml)
  → Component requirements NOT applied (base applies_to excludes ocpbugs-bug)

# Using custom team template (no overrides applied)
/jira:create spike OCPEDGE "Research authentication"
  → Uses ocpedge/spike.yaml (custom template)
  → Overrides NOT applied (spike.yaml doesn't match applies_to patterns)
```

**The --overrides Flag:**
Use `--overrides <path>` to specify which overrides file to apply:
- `--overrides ocpedge/overrides.yaml` → project-relative path
- `--overrides ~/.jira-overrides/my-team.yaml` → user-specific path
- `--overrides none` → explicitly skip overrides

**Auto-detection:**
- **Project match**: Creating in OCPEDGE → `ocpedge/overrides.yaml` applied automatically
- **No match**: Creating in OCPBUGS → prompted to select overrides (None is first option)

**Cascading applies_to:** Overrides use a cascading pattern where top-level `applies_to` is the default, but individual fields can override:
```yaml
# Top-level: default for all fields
applies_to:
  - "common/bug.yaml"
  - "common/epic.yaml"
  - "common/spike.yaml"
  - "common/task.yaml"
  - "common/story.yaml"

# Most fields inherit top-level applies_to
jira_fields:
  components:
    required: true  # Uses top-level applies_to

# Individual fields can override
defaults:
  labels:
    - ai-generated-jira
    - hypershift
  applies_to:  # Override: apply to ALL common templates
    - "common/*.yaml"
```

This pattern allows:
- **Base templates** (bug, epic, story, task, spike) get most overrides (component requirements, display format)
- **Product templates** (ocpbugs-bug, rhel-bug, osdocs-bug) only get specific overrides (like labels)
- **Workflow templates** (feature, rfe) excluded entirely to prevent incorrect application

## Directory Structure

```text
templates/
├── _base.yaml      # Shared defaults (DO NOT USE DIRECTLY)
├── common/         # Base templates and product-level templates (OCPBUGS, RHEL, OSDOCS)
│   ├── bug.yaml           # Base bug template
│   ├── ocpbugs-bug.yaml   # OCPBUGS product template
│   ├── osdocs-bug.yaml    # OSDOCS product template
│   ├── rhel-bug.yaml      # RHEL product template
│   └── ...
├── <team>/         # Team-specific templates (ocpedge, cntrlplane, hypershift, etc.)
│   ├── <type>.yaml        # Custom issue type template
│   └── overrides.yaml     # Applied to all common templates for this team
└── user/           # Personal templates (gitignored)
```

## Published Template Requirements

Templates outside `user/` **MUST** have:

| Field | Required | Example |
|-------|----------|---------|
| `inherits` | ✅ | `_base.yaml` or `common/story.yaml` |
| `name` | ✅ | `ocpedge-story` |
| `description` | ✅ | Brief description |
| `version` | ✅ | `1.0.0` |
| `created` | ✅ | `2025-01-08` |
| `author` | ✅ | `openshift-eng` |
| `source.repository` | ✅ | `https://github.com/openshift-eng/ai-helpers` |
| `source.path` | ✅ | `plugins/jira/templates/ocpedge/story.yaml` |

## Usage

```bash
# Use template with jira:create
/jira:create story OCPEDGE "Add feature" --template ocpedge-story

# List available templates
/jira:template list

# Validate a template
/jira:template validate ocpedge-story

# Create personal template from existing
/jira:template create-from ocpedge-story
```

## Creating New Templates

1. **Create in user directory:**
   ```bash
   /jira:template create my-story
   ```

2. **Test and refine:** Use the template, iterate

3. **Publish (optional):**
   ```bash
   /jira:template publish my-story
   ```

## Security Considerations

**NEVER include in templates:**
- API tokens or credentials
- URLs with embedded credentials
- Personal identifiable information (PII)
- Internal-only URLs that reveal infrastructure

**Safe alternatives:**
- Use placeholders: `{{api_token}}`, `YOUR_API_KEY`
- Reference environment variables
- Document where to obtain credentials

## See Also

- `/jira:template` - Template management command
- `/jira:create` - Issue creation with templates
- `template-management` skill - Implementation details
