# Generated by Claude Sonnet 4.5 (Anthropic) - December 2025
#
# OCPBUGS Bug Template
inherits: common/bug.yaml

name: ocpbugs-bug
description: Bug template for OCPBUGS project with OpenShift-specific fields
version: 1.0.0
created: 2025-01-08
author: openshift-eng

source:
  repository: "https://github.com/openshift-eng/ai-helpers"
  path: "plugins/jira/templates/common/ocpbugs-bug.yaml"

project_key: OCPBUGS

defaults:
  labels:
    - ai-generated-jira
    - template:ocpbugs-bug

# Project-specific: omit 'project' from display
display_format:
  - priority
  - severity
  - summary
  - assignee
  - status

# Extend parent description with environment section
description_template: |
  h4. Description of problem

  {{problem_description}}

  h4. Version-Release number of selected component (if applicable)

  {{version}}

  h4. How reproducible

  {{reproducibility}}

  h4. Steps to Reproduce

  {{#steps}}
  # {{.}}
  {{/steps}}

  h4. Actual results

  {{actual_results}}

  h4. Expected results

  {{expected_results}}

  h4. Environment

  * Platform: {{platform}}
  * Cluster type: {{cluster_type}}
  {{#additional_context}}

  h4. Additional Context

  {{additional_context}}
  {{/additional_context}}

# Extend parent placeholders
placeholders:
  - name: problem_description
    description: "Clear description of the problem"

  - name: version
    description: "OpenShift version (e.g., 4.17.0, 4.18.0-rc.1)"

  - name: reproducibility
    description: "How often does this occur? (Always/Sometimes/Rarely)"

  - name: steps
    description: "Steps to reproduce (one per line)"

  - name: actual_results
    description: "What actually happens? Include error messages."

  - name: expected_results
    description: "What should happen instead?"

  - name: additional_context
    description: "Logs, must-gather output, workarounds"
    prompt_text: "Any additional context? (logs, must-gather output, workarounds, related issues)"
    help_text: |
      For bugs, focus on diagnostic information:
      - Logs (pod logs, operator logs)
      - must-gather output
      - Workarounds (if any)
      Also include: related issues, design docs if applicable.

  - name: platform
    description: "Platform (AWS/Azure/GCP/vSphere/BareMetal/etc.)"
    required: false
    default: "Not specified"

  - name: cluster_type
    description: "Cluster type (SNO/Compact/Standard/HyperShift/etc.)"
    required: false
    default: "Standard"

jira_fields:
  versions:
    source: version
    required: true
  components:
    required: true
    prompt_if_missing: true

validation:
  summary:
    max_length: 100
  version:
    required: true
